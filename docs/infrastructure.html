

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Infrastructure Setup &mdash; Auth Middleware 0.2.12 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
    <link rel="canonical" href="/auth-middleware/infrastructure.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=1e30946d"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="AWS Cognito Infrastructure Setup" href="infrastructure/cognito-setup.html" />
    <link rel="prev" title="Middleware Configuration" href="middleware-configuration.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="index.html" class="icon icon-home">
            Auth Middleware
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="middleware-configuration.html">Middleware Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Infrastructure Setup:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Infrastructure Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="#provider-specific-setup-guides">Provider-Specific Setup Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html">AWS Cognito Infrastructure Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#step-1-create-a-user-pool">Step 1: Create a User Pool</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#step-2-create-app-clients">Step 2: Create App Clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#step-3-create-user-groups">Step 3: Create User Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#step-4-create-users">Step 4: Create Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#step-5-assign-users-to-groups">Step 5: Assign Users to Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#step-6-configure-user-pool-settings">Step 6: Configure User Pool Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#step-7-testing-your-setup">Step 7: Testing Your Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#configuration-summary">Configuration Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#security-best-practices">Security Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/entra-id-setup.html">Azure Entra ID Infrastructure Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/entra-id-setup.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/entra-id-setup.html#coming-soon">Coming Soon</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/google-setup.html">Google Identity Infrastructure Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/google-setup.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/google-setup.html#coming-soon">Coming Soon</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="#security-considerations">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Authentication Providers:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cognito_provider.html">AWS Cognito Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="entra_id_provider.html">Azure Entra ID Authentication Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwt_auth_provider.html">JWT Authentication Provider</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Topics:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html">Groups Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html#overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html#built-in-providers">Built-in Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html#using-groups-in-your-application">Using Groups in Your Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html#custom-groups-provider">Custom Groups Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html#configuration-examples">Configuration Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html#testing-groups-providers">Testing Groups Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html#best-practices">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html#migration-and-deployment">Migration and Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html#api-reference">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups-provider.html#see-also">See Also</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html">Permissions Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#built-in-providers">Built-in Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#using-permissions-in-your-application">Using Permissions in Your Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#permission-patterns">Permission Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#custom-permissions-provider">Custom Permissions Provider</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#advanced-features">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#permission-management">Permission Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#testing-permissions-providers">Testing Permissions Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#best-practices">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#api-reference">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="permissions-provider.html#see-also">See Also</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-authz-providers.html">Extending Authorization Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-authz-providers.html#overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-authz-providers.html#understanding-the-provider-interface">Understanding the Provider Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-authz-providers.html#integration-patterns">Integration Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-authz-providers.html#advanced-patterns">Advanced Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-authz-providers.html#caching-and-performance">Caching and Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-authz-providers.html#error-handling-and-resilience">Error Handling and Resilience</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-authz-providers.html#testing-custom-providers">Testing Custom Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-authz-providers.html#deployment-considerations">Deployment Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-authz-providers.html#best-practices-summary">Best Practices Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending-authz-providers.html#see-also">See Also</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-property.html">The User Property</a></li>
<li class="toctree-l1"><a class="reference internal" href="auth-authn.html">Control Authentication and Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="jwt_bearer_manager.html">jwt_bearer_manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">Exception Handling</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html">Type Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Authentication Functions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Auth Middleware</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Infrastructure Setup</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/infrastructure.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="infrastructure-setup">
<span id="infrastructure"></span><h1>Infrastructure Setup<a class="headerlink" href="#infrastructure-setup" title="Link to this heading"></a></h1>
<p>This section provides detailed guides for setting up the infrastructure required by different identity providers. Each provider requires specific configuration and setup steps that must be completed before you can use them with the auth-middleware.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following guides focus on manual setup through web consoles. For automated infrastructure deployment, consider using Infrastructure as Code tools like Terraform, AWS CloudFormation, or Azure Resource Manager templates.</p>
</div>
</section>
<section id="provider-specific-setup-guides">
<h1>Provider-Specific Setup Guides<a class="headerlink" href="#provider-specific-setup-guides" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html">AWS Cognito Infrastructure Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#step-1-create-a-user-pool">Step 1: Create a User Pool</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#step-2-create-app-clients">Step 2: Create App Clients</a><ul>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#app-client-1-client-credentials-flow">App Client 1: Client Credentials Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#app-client-2-user-password-flow">App Client 2: User Password Flow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#step-3-create-user-groups">Step 3: Create User Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#step-4-create-users">Step 4: Create Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#step-5-assign-users-to-groups">Step 5: Assign Users to Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#step-6-configure-user-pool-settings">Step 6: Configure User Pool Settings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#advanced-configuration">Advanced Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#step-7-testing-your-setup">Step 7: Testing Your Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#using-bruno-api-testing">Using Bruno/API Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#configuration-summary">Configuration Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="infrastructure/cognito-setup.html#common-issues">Common Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#security-best-practices">Security Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/cognito-setup.html#next-steps">Next Steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/entra-id-setup.html">Azure Entra ID Infrastructure Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/entra-id-setup.html#overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/entra-id-setup.html#coming-soon">Coming Soon</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/google-setup.html">Google Identity Infrastructure Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/google-setup.html#overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="infrastructure/google-setup.html#coming-soon">Coming Soon</a></li>
</ul>
</div>
</section>
<section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h1>
<p>Each identity provider requires different infrastructure components:</p>
<dl class="simple">
<dt><strong>AWS Cognito</strong></dt><dd><ul class="simple">
<li><p>User Pool for user management</p></li>
<li><p>App Clients for different authentication flows</p></li>
<li><p>User Groups for authorization</p></li>
<li><p>Optional: Custom attributes and triggers</p></li>
</ul>
</dd>
<dt><strong>Azure Entra ID</strong></dt><dd><ul class="simple">
<li><p>App Registration for your application</p></li>
<li><p>Service Principal configuration</p></li>
<li><p>Group assignments</p></li>
<li><p>API permissions</p></li>
</ul>
</dd>
<dt><strong>Google Identity</strong></dt><dd><ul class="simple">
<li><p>OAuth 2.0 Client IDs</p></li>
<li><p>Consent screen configuration</p></li>
<li><p>User management through Google Workspace (optional)</p></li>
</ul>
</dd>
</dl>
</section>
<section id="security-considerations">
<h1>Security Considerations<a class="headerlink" href="#security-considerations" title="Link to this heading"></a></h1>
<p>When setting up identity provider infrastructure, consider the following security best practices:</p>
<ol class="arabic simple">
<li><p><strong>Principle of Least Privilege</strong>: Only grant the minimum permissions necessary</p></li>
<li><p><strong>Multi-Factor Authentication</strong>: Enable MFA wherever possible</p></li>
<li><p><strong>Token Rotation</strong>: Configure appropriate token expiration times</p></li>
<li><p><strong>Audit Logging</strong>: Enable comprehensive logging for security monitoring</p></li>
<li><p><strong>Network Security</strong>: Use HTTPS/TLS for all communications</p></li>
<li><p><strong>Secret Management</strong>: Never hardcode secrets; use environment variables or secret management services</p></li>
</ol>
</section>
<section id="next-steps">
<h1>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading"></a></h1>
<p>After completing the infrastructure setup for your chosen provider:</p>
<ol class="arabic simple">
<li><p>Configure the auth-middleware with your provider settings</p></li>
<li><p>Test the authentication flow</p></li>
<li><p>Implement authorization rules using groups and permissions</p></li>
<li><p>Set up monitoring and logging</p></li>
<li><p>Configure production security settings</p></li>
</ol>
<p>For implementation details, refer to the <a class="reference internal" href="middleware-configuration.html"><span class="doc">Middleware Configuration</span></a> and provider-specific documentation.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="middleware-configuration.html" class="btn btn-neutral float-left" title="Middleware Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="infrastructure/cognito-setup.html" class="btn btn-neutral float-right" title="AWS Cognito Infrastructure Setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, impalah.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>