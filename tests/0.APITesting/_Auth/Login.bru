meta {
  name: Login
  type: http
  seq: 1
}

post {
  url: https://cognito-idp.eu-central-1.amazonaws.com/
  body: json
  auth: none
}

headers {
  Content-Type: application/x-amz-json-1.1
  X-Amz-Target: AWSCognitoIdentityProviderService.InitiateAuth
}

body:json {
  {
    "AuthParameters": {
      "USERNAME": "linus@pressanykey.tech",
      "PASSWORD": "Password4321!"
    },
    "AuthFlow": "USER_PASSWORD_AUTH",
    "ClientId": "1gfume7psuthkgd236qo8icl4s"
  }
}

body:form-urlencoded {
  grant_type: password
  client_id: {{aws_cognito_client_id}}
  username: {{aws_cognito_user}}
  password: {{aws_cognito_password}}
  scope: aws.cognito.signin.user.admin+openid+profile
}
